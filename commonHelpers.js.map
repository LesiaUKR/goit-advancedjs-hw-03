{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://api.thecatapi.com/v1';\nconst BREEDS_END_POINT = '/breeds';\nconst IMAGE_END_POINT = '/images/search';\nconst API_KEY =\n  'live_0MLgLm3ygusJhuSn6RvDBclcWVtxZS27hFvL1qegdoBmEHHqkWml5GyhzLGFd5H8';\naxios.defaults.headers.common['x-api-key'] = API_KEY;\n\nexport const fetchBreeds = async () => {\n  const responce = await axios.get(`${BASE_URL}${BREEDS_END_POINT}`);\n  if (!responce || responce.status !== 200) {\n    throw new Error('Failed to fetch cat breeds');\n  }\n  return responce.data;\n};\n\nexport const fetchCatByBreed = async breedId => {\n  const responce = await axios.get(\n    `${BASE_URL}${IMAGE_END_POINT}?breed_ids=${breedId}`\n  );\n  if (!responce || responce.status !== 200) {\n    throw new Error('Error fetching cat by breed');\n  }\n  return responce.data;\n};\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n\nconst catInfoBox = document.querySelector('.cat-info');\nconst select = document.querySelector('#selectElement');\nconst loader = document.querySelector('.loader');\nconst error = document.querySelector('.error');\n\nconst breedSelect = new SlimSelect({\n  select: '#selectElement',\n  settings: {\n    placeholderText: 'Search cats breeds',\n  },\n});\n\nfetchBreeds()\n  .then(data => {\n    const options = [\n      {\n        value: '',\n        text: breedSelect.settings.placeholderText,\n        placeholder: true,\n      },\n      ...data.map(({ name, id }) => ({\n        value: `${id}`,\n        text: `${name}`,\n      })),\n    ];\n    breedSelect.setData(options);\n\n    select.classList.remove('visually-hidden');\n    loader.classList.add('visually-hidden');\n\n    select.addEventListener('change', onChangeSelect);\n  })\n  .catch(err => {\n    loader.classList.add('visually-hidden');\n    error.classList.remove('visually-hidden');\n    iziToast.show({\n      message: 'Failed to fetch cat breeds',\n      messageColor: 'red',\n      messageSize: '18px',\n      backgroundColor: '#ffffff',\n      position: 'topRight',\n      timeout: 2500,\n    });\n    console.log(err.message);\n  });\n\nfunction onChangeSelect(evt) {\n  const selectedValuesId = evt.target.value;\n\n  loader.classList.remove('visually-hidden');\n  catInfoBox.classList.add('visually-hidden');\n\n  fetchCatByBreed(selectedValuesId)\n    .then(data => {\n      console.log('FetchCatByBreed Response:', data);\n      createMarkup(data);\n    })\n    .catch(err => {\n      catInfoBox.innerHTML = '';\n      loader.classList.add('visually-hidden');\n      error.classList.remove('visually-hidden');\n      iziToast.show({\n        message: 'Error fetching cat by breed',\n        messageColor: 'red',\n        messageSize: '18px',\n        backgroundColor: '#ffffff',\n        position: 'topRight',\n        timeout: 2500,\n      });\n      console.log(err.message);\n    })\n    .finally(() => {\n      loader.classList.add('visually-hidden');\n      catInfoBox.classList.remove('visually-hidden');\n    });\n}\n\nfunction createMarkup(data) {\n  const { url, breeds } = data[0];\n  const { name, alt_names, description, temperament } = breeds[0];\n\n  const markup = `\n  <div class=\"imgWrapper\">\n<img class=\"image\" src=\"${url}\" alt=\"${alt_names}\"/>\n  </div>\n  <div class=\"infoWrapper\">\n    <h2 class='title'>${name}</h2>\n    <p class='description'>${description}</p>\n    <h3 class='title subtitle'>Temperament</h3>\n    <p class='temperament'>${temperament}</p>\n  </div>\n  `;\n  catInfoBox.innerHTML = markup;\n}\n"],"names":["BASE_URL","BREEDS_END_POINT","IMAGE_END_POINT","API_KEY","axios","fetchBreeds","responce","fetchCatByBreed","breedId","catInfoBox","select","loader","error","breedSelect","SlimSelect","data","options","name","id","onChangeSelect","err","iziToast","evt","selectedValuesId","createMarkup","url","breeds","alt_names","description","temperament","markup"],"mappings":"owBAEA,MAAMA,EAAW,+BACXC,EAAmB,UACnBC,EAAkB,iBAClBC,EACJ,wEACFC,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAID,EAEtC,MAAME,EAAc,SAAY,CACrC,MAAMC,EAAW,MAAMF,EAAM,IAAI,GAAGJ,CAAQ,GAAGC,CAAgB,EAAE,EACjE,GAAI,CAACK,GAAYA,EAAS,SAAW,IACnC,MAAM,IAAI,MAAM,4BAA4B,EAE9C,OAAOA,EAAS,IAClB,EAEaC,EAAkB,MAAMC,GAAW,CAC9C,MAAMF,EAAW,MAAMF,EAAM,IAC3B,GAAGJ,CAAQ,GAAGE,CAAe,cAAcM,CAAO,EACtD,EACE,GAAI,CAACF,GAAYA,EAAS,SAAW,IACnC,MAAM,IAAI,MAAM,6BAA6B,EAE/C,OAAOA,EAAS,IAClB,ECpBMG,EAAa,SAAS,cAAc,WAAW,EAC/CC,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAQ,SAAS,cAAc,QAAQ,EAEvCC,EAAc,IAAIC,EAAW,CACjC,OAAQ,iBACR,SAAU,CACR,gBAAiB,oBAClB,CACH,CAAC,EAEDT,EAAa,EACV,KAAKU,GAAQ,CACZ,MAAMC,EAAU,CACd,CACE,MAAO,GACP,KAAMH,EAAY,SAAS,gBAC3B,YAAa,EACd,EACD,GAAGE,EAAK,IAAI,CAAC,CAAE,KAAAE,EAAM,GAAAC,CAAE,KAAQ,CAC7B,MAAO,GAAGA,CAAE,GACZ,KAAM,GAAGD,CAAI,EACrB,EAAQ,CACR,EACIJ,EAAY,QAAQG,CAAO,EAE3BN,EAAO,UAAU,OAAO,iBAAiB,EACzCC,EAAO,UAAU,IAAI,iBAAiB,EAEtCD,EAAO,iBAAiB,SAAUS,CAAc,CACpD,CAAG,EACA,MAAMC,GAAO,CACZT,EAAO,UAAU,IAAI,iBAAiB,EACtCC,EAAM,UAAU,OAAO,iBAAiB,EACxCS,EAAS,KAAK,CACZ,QAAS,6BACT,aAAc,MACd,YAAa,OACb,gBAAiB,UACjB,SAAU,WACV,QAAS,IACf,CAAK,EACD,QAAQ,IAAID,EAAI,OAAO,CAC3B,CAAG,EAEH,SAASD,EAAeG,EAAK,CAC3B,MAAMC,EAAmBD,EAAI,OAAO,MAEpCX,EAAO,UAAU,OAAO,iBAAiB,EACzCF,EAAW,UAAU,IAAI,iBAAiB,EAE1CF,EAAgBgB,CAAgB,EAC7B,KAAKR,GAAQ,CACZ,QAAQ,IAAI,4BAA6BA,CAAI,EAC7CS,EAAaT,CAAI,CACvB,CAAK,EACA,MAAMK,GAAO,CACZX,EAAW,UAAY,GACvBE,EAAO,UAAU,IAAI,iBAAiB,EACtCC,EAAM,UAAU,OAAO,iBAAiB,EACxCS,EAAS,KAAK,CACZ,QAAS,8BACT,aAAc,MACd,YAAa,OACb,gBAAiB,UACjB,SAAU,WACV,QAAS,IACjB,CAAO,EACD,QAAQ,IAAID,EAAI,OAAO,CAC7B,CAAK,EACA,QAAQ,IAAM,CACbT,EAAO,UAAU,IAAI,iBAAiB,EACtCF,EAAW,UAAU,OAAO,iBAAiB,CACnD,CAAK,CACL,CAEA,SAASe,EAAaT,EAAM,CAC1B,KAAM,CAAE,IAAAU,EAAK,OAAAC,CAAQ,EAAGX,EAAK,CAAC,EACxB,CAAE,KAAAE,EAAM,UAAAU,EAAW,YAAAC,EAAa,YAAAC,GAAgBH,EAAO,CAAC,EAExDI,EAAS;AAAA;AAAA,0BAESL,CAAG,UAAUE,CAAS;AAAA;AAAA;AAAA,wBAGxBV,CAAI;AAAA,6BACCW,CAAW;AAAA;AAAA,6BAEXC,CAAW;AAAA;AAAA,IAGtCpB,EAAW,UAAYqB,CACzB"}